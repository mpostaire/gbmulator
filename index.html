<!doctypehtml><html lang=en-us><head><meta charset=utf-8><meta content="text/html; charset=utf-8"http-equiv=Content-Type><title>GBmulator</title><link href=style.css rel=stylesheet><link href=favicon.png rel=icon type=image/png><link href=https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css rel=stylesheet></head><body><div class=topnav><a href=/puce8>puce8</a> <a class=active href=/gbmulator>GBmulator</a> <a class=split href=https://github.com/mpostaire/gbmulator target=_blank><i class="fa fa-github"></i></a></div><div id=emscripten-status><figure id=spinner style=overflow:visible><div class=spinner></div></figure><div id=status class=emscripten>Downloading...</div><div class=emscripten><progress id=progress max=100 style=visibility:hidden value=0></progress></div></div><div id=gb style=visibility:hidden><button id=open-menu onclick=togglePause(this) disabled class=paused></button><div id=menu><div id=menu-container><input id=rom-picker type=file accept=.gb,.sgb,.gbc,.cgb onchange=openROM(event) style=display:none><button id=open-rom onclick=openROMPicker()>Open ROM...</button> <button id=reset-rom onclick=resetROM() disabled>Restart emulator</button><div class=separator>Options</div><div class=options-container><div><span>Speed:</span> <input id=speed-slider type=range class=slider max=7 min=1 oninput=setSpeed(this) value=1> <span id=speed-label class=slider-label>x1.0</span></div><div><span>Sound:</span> <input id=sound-slider type=range class=slider max=100 min=0 oninput=setSound(this) value=0> <span id=sound-label class=slider-label>0%</span></div><div><span>Scale:</span> <select id=scale-setter onchange=setScale(this)><option value=2>x2</option><option value=3>x3</option><option value=4>x4</option></select></div><div><span>Color:</span> <select id=color-setter onchange=setColor(this)><option value=0>gray</option><option value=1>original</option></select></div><div><span id=mode-setter-label>Mode:</span> <select id=mode-setter onchange=setMode(this)><option value=1>DMG</option><option value=2>CGB</option></select></div></div><div class=separator>Keybindings</div><div class=options-container><div><span>LEFT:</span> <button id=keybind-setter-1></button></div><div><span>RIGHT:</span> <button id=keybind-setter-0></button></div><div><span>UP:</span> <button id=keybind-setter-2></button></div><div><span>DOWN:</span> <button id=keybind-setter-3></button></div><div><span>A:</span> <button id=keybind-setter-4></button></div><div><span>B:</span> <button id=keybind-setter-5></button></div><div><span>START:</span> <button id=keybind-setter-7></button></div><div><span>SELECT:</span> <button id=keybind-setter-6></button></div></div></div></div><div id=gb-screen-border><canvas class=emscripten id=canvas oncontextmenu=event.preventDefault()></canvas></div><div id=gb-controls><div id=gb-main-buttons><div id=gb-direction-buttons><a class="gb-button gb-direction-button"id=gb-up><div class=gb-direction-button-circle></div></a><a class="gb-button gb-direction-button"id=gb-down><div class=gb-direction-button-circle></div></a><a class="gb-button gb-direction-button"id=gb-left><div class=gb-direction-button-circle></div></a><a class="gb-button gb-direction-button"id=gb-right><div class=gb-direction-button-circle></div></a><div id=gb-center></div></div><div id=gb-round-buttons><a class="gb-button gb-round-button"id=gb-b>B</a> <a class="gb-button gb-round-button"id=gb-a>A</a></div></div><div id=gb-start-select-buttons><div id=gb-select-button-container><a class="gb-button gb-rectangle-button"id=gb-select></a> <span id=gb-select-label class=gb-button-label>select</span></div><div id=gb-start-button-container><a class="gb-button gb-rectangle-button"id=gb-start></a> <span id=gb-start-label class=gb-button-label>start</span></div></div></div></div><script>let gb=document.getElementById("gb");const buttons=["gb-right","gb-left","gb-up","gb-down","gb-a","gb-b","gb-select","gb-start"];let currentButton=null,on_gui_button_down=function(e,t,n){Module.ccall("on_gui_button_down","void",["number"],[n]),currentButton=t},on_gui_button_up=function(e,t,n){t===currentButton&&(Module.ccall("on_gui_button_up","void",["number"],[n]),currentButton=null)};buttons.forEach((function(e,t){let n=document.getElementById(e);n.addEventListener("touchstart",(e=>on_gui_button_down(e,n,t))),n.addEventListener("touchend",(e=>on_gui_button_up(e,n,t))),n.addEventListener("touchcancel",(e=>on_gui_button_up(e,n,t))),n.addEventListener("mousedown",(e=>on_gui_button_down(e,n,t))),n.addEventListener("mouseup",(e=>on_gui_button_up(e,n,t))),n.addEventListener("mouseleave",(e=>on_gui_button_up(e,n,t)))}));var editingKeybind=-1;const keybindSetters=["keybind-setter-0","keybind-setter-1","keybind-setter-2","keybind-setter-3","keybind-setter-4","keybind-setter-5","keybind-setter-6","keybind-setter-7"];keybindSetters.forEach((function(e,t){document.getElementById(e).onclick=function(){-1===editingKeybind&&(editingKeybind=t,Module.ccall("edit_keybind","void",["number"],[t]),toggleEditingKeybind(t))}}));var toggleEditingKeybind=function(e){var t=document.getElementById(keybindSetters[e]);"red"===t.style.color?t.style.color="black":t.style.color="red"},statusElement=document.getElementById("status"),progressElement=document.getElementById("progress"),spinnerElement=document.getElementById("spinner"),Module={preRun:[],postRun:[],print:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.log(e)},printErr:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments).join(" ")),console.error(e)},canvas:function(){let e=document.getElementById("canvas");return e.addEventListener("webglcontextlost",(function(e){alert("WebGL context lost. You will need to reload the page."),e.preventDefault()}),!1),e}(),setStatus:function(e){if(Module.setStatus.last||(Module.setStatus.last={time:Date.now(),text:""}),e===Module.setStatus.last.text)return;let t=e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/),n=Date.now();t&&n-Module.setStatus.last.time<30||(Module.setStatus.last.time=n,Module.setStatus.last.text=e,t?(e=t[1],progressElement.value=100*parseInt(t[2]),progressElement.max=100*parseInt(t[4]),progressElement.style="visibility: visible;",spinnerElement.style="visibility: visible;"):(progressElement.value=null,progressElement.max=null,progressElement.style="visibility: hidden;",e||(spinnerElement.style="visibility: hidden;")),statusElement.innerHTML=e)},totalDependencies:0,monitorRunDependencies:function(e){this.totalDependencies=Math.max(this.totalDependencies,e),Module.setStatus(e?"Preparing... ("+(this.totalDependencies-e)+"/"+this.totalDependencies+")":"All downloads complete.")}};Module.postRun.push((function(){gb.style="visibility: visible;"}));var setTheme=function(e){switch(e){case 1:document.documentElement.className="theme-dmg";break;case 2:document.documentElement.className="theme-cgb"}};let config=localStorage.getItem("config"),done=!1;config&&config.split("\n").every((e=>{let t=e.split("=");return"mode"!==t[0]||(setTheme(parseInt(t[1],10)),done=!0,!1)})),done||setTheme(2),Module.setStatus("Downloading..."),window.onerror=function(){Module.setStatus("Exception thrown, see JavaScript console"),spinnerElement.style.display="none",Module.setStatus=function(e){e&&Module.printErr("[post-exception status] "+e)}},window.onbeforeunload=function(e){Module.ccall("on_before_unload"),gb.style="visibility: hidden;"};var openROM=function(e){const t=new FileReader;t.onload=e=>{const t=new Uint8Array(e.target.result),n=t.length*t.BYTES_PER_ELEMENT,o=Module._malloc(n),l=new Uint8Array(Module.HEAPU8.buffer,o,n);l.set(t),Module.ccall("receive_rom","void",["number","number"],[l.byteOffset,t.length]),document.getElementById("reset-rom").disabled=0,document.getElementById("mode-setter-label").innerHTML="Mode: (applied on restart)";let s=document.getElementById("open-menu");s.disabled=0,s.classList.remove("paused")},0!==e.target.files.length&&(e.target.files[0].name.match("^.*.(gb|sgb|gbc|cgb)$")?t.readAsArrayBuffer(e.target.files[0]):Module.printErr("Invalid file extension"))},setMenuVisibility=function(e){var t=document.getElementById("menu"),n=document.getElementById("open-menu");e?(n.classList.remove("paused"),t.style.display="none"):(n.classList.add("paused"),t.style.display="flex")},togglePause=function(e){var t=document.getElementById("menu");Module.ccall("set_pause","void",["boolean"],["none"===t.style.display])},ROMPicker=document.getElementById("rom-picker"),openROMPicker=function(){ROMPicker.click()},resetROM=function(){Module.ccall("reset_rom","void")},scaleLabel=document.getElementById("scale-label"),setScale=function(e){Module.ccall("set_scale","void",["number"],[Number(e.value)])},speedLabel=document.getElementById("speed-label"),setSpeed=function(e){var t=(Number(e.value)+1)/2;speedLabel.innerHTML="x"+t.toFixed(1),Module.ccall("set_speed","void",["number"],[t])},soundLabel=document.getElementById("sound-label"),setSound=function(e){var t=Number(e.value)/100;soundLabel.innerHTML=e.value+"%",Module.ccall("set_sound","void",["number"],[t])},setColor=function(e){Module.ccall("set_color","void",["number"],[Number(e.value)])},setMode=function(e){Module.ccall("set_mode","void",["number"],[Number(e.value)])}</script><script async src=index.js></script></body></html>